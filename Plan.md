# План автоматизации

## Автоматизируемые сценарии

### 1. Успешная покупка тура:

Тестовые данные:
- Номер карты - "1111 2222 3333 4444"
- Месяц - текущий месяц + 1
- Год - текущий год + 1
- Владелец - фейкер, случайное имя на латинице или кириллице
- CVC - фейкер, случайное число из трех цифр

Ожидаемый результат:
- Уведомление: "Операция одобрена Банком."
- В БД (payment_entity / credit_request_entity) статус APPROVED.

### 2. Отклонённая операция:

Тестовые данные:
- Номер карты - "5555 6666 7777 8888"
- Месяц - текущий месяц + 1
- Год - текущий год + 1
- Владелец - фейкер, случайное имя на латинице или кириллице
- CVC - фейкер, случайное число из трех цифр

Ожидаемый результат:
- Уведомление: "Ошибка! Банк отказал в проведении операции."
- В БД статус DECLINED.

### 3. Валидация полей формы:

#### 3.1. Пустые поля.
Тестовые данные:
- CardInfo("", "", "", "", "")

Ожидаемый результат:
- Под всеми полями сообщение: "Поле обязательно для заполнения" или "Неверный формат".

#### 3.2. Неверный формат номера карты (менее 16 цифр).
- Номер карты - "1111 2222 3333 444"

Ожидаемый результат: "Неверный формат".

#### 3.3. Несуществующая карта.
- Номер карты - "1111 2222 3333 4445"

Ожидаемый результат: Уведомление об ошибке от банка.

#### 3.4. Неверный формат даты (прошедший месяц/год).

##### 3.4.1. Тестовые данные:
- Месяц - текущий месяц - 1

Ожидаемый результат: "Истёк срок действия карты".

##### 3.4.2. Тестовые данные:
- Месяц - "13"
Ожидаемый результат: "Неверно указан срок действия карты".

##### 3.4.3. Тестовые данные:
- Год - текущий месяц - 1

Ожидаемый результат: "Истёк срок действия карты".

#### 3.5. Владелец.

Тестовые данные:
Владелец - "123!@#"

Ожидаемый результат: "Неверный формат".

#### 3.6. Неверный CVV (менее 3 цифр).

Тестовые данные:
- CVC - фейкер, случайное число из двух цифр.

Ожидаемый результат: "Неверный формат".

### 4. Проверка поддержки СУБД:

- Запись данных о платеже в PostgreSQL/MySQL.

## Инструменты
- Java: Основной язык для автотестов (совместимость с Selenide).
- Gradle: Гибкость и удобство управления зависимостями.
- Selenide: надстройка над Selenium WebDriver для Java, которая упрощает написание тестов.
- JUnit 5: Современный фреймворк для модульного тестирования.
- Allure Report: Наглядная отчётность с поддержкой скриншотов.
- Docker: Запуск SUT и тестов в контейнерах.
- GitHub Actions: Удобный бесплатный CI для автоматического прогона тестов.

## Риски
- Изменение структуры сайта: Если вёрстка изменится, тесты могут сломаться.
- Изменение локаторов: Если локаторы изменятся, тесты могут сломаться.
- Сложность отладки падающих тестов: Неочевидные ошибки требуют значительного времени на анализ.

## Оценка времени
- Настройка окружения: 4 часа.
- Написание тестов: 16 часов.
- Интеграция с Docker: 8 часов.
- Настройка Allure + CI: 4 часа.
- Отчетность: 4 часа.
- Итого: 36 часов.

## План сдачи
- Настройка проекта: День 1.
- Написание тестов: День 3-4.
- Интеграция с Docker: День 5
- Настройка Allure + CI: День 6
- Подготовка отчетной документации: День 7